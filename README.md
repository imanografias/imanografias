# ImanografÃ­as Magnet Creator

This is a Next.js application designed to help users create personalized magnets from their images. It allows users to upload photos, crop and adjust them, specify quantities, and then generates high-quality printable files. The application also includes a notification system to send order details via email.

## Features

-   **Order Information**: Collects customer name, order number, phone, and total magnet quantity.
-   **Image Upload & Cropping**: Users can upload multiple images, crop them into a square format, and adjust zoom/position.
-   **Quantity Selection**: Users can specify how many copies of each image they want, ensuring the total matches the order.
-   **High-Quality Output**: Generates images at 300 DPI for optimal print quality.
-   **File Upload**: Integrates with UploadThing for secure and efficient file storage.
-   **Email Notifications**: Sends detailed order information, including file URLs and technical specs, to a specified Gmail address using Nodemailer.

## Getting Started

Follow these instructions to set up and run the project locally.

### Prerequisites

-   Node.js (v18.x or higher)
-   npm or yarn
-   A Google account with App Passwords enabled (for email sending)

### Installation

1.  **Clone the repository**:

    \`\`\`bash
    git clone https://github.com/your-username/imanografias-magnet-creator.git
    cd imanografias-magnet-creator
    \`\`\`

2.  **Install dependencies**:

    \`\`\`bash
    npm install
    # or
    yarn install
    \`\`\`

3.  **Set up Environment Variables**:
    Create a `.env.local` file in the root of your project and add the following environment variables:

    \`\`\`env
    # UploadThing
    UPLOADTHING_SECRET=sk_live_YOUR_UPLOADTHING_SECRET
    UPLOADTHING_APP_ID=YOUR_UPLOADTHING_APP_ID

    # Gmail for Email Sending
    GMAIL_EMAIL=your_gmail_address@gmail.com
    GMAIL_APP_PASSWORD=your_gmail_app_password
    \`\`\`

    -   **`UPLOADTHING_SECRET` and `UPLOADTHING_APP_ID`**: Obtain these from your [UploadThing dashboard](https://uploadthing.com/).
    -   **`GMAIL_EMAIL`**: Your Gmail address that will be used to send notification emails.
    -   **`GMAIL_APP_PASSWORD`**: A special 16-character password generated by Google for applications. **Do NOT use your regular Gmail password.** See the section below on how to generate this.

### Generating a Gmail App Password

To use Gmail for sending emails via Nodemailer, you need to generate an "App password" for your Google account. This is a more secure way to allow applications to log into your Google account without using your main password.

**Steps to generate an App password:**

1.  **Enable 2-Step Verification**: If you haven't already, enable 2-Step Verification for your Google Account. This is a prerequisite for generating App Passwords.
    -   Go to your Google Account: [myaccount.google.com](https://myaccount.google.com/)
    -   Navigate to **Security** > **2-Step Verification**.
    -   Follow the on-screen steps to enable it.

2.  **Generate the App Password**:
    -   After enabling 2-Step Verification, go back to the **Security** section of your Google Account.
    -   Under "How you sign in to Google", select **App passwords**. You might need to sign in to your Google Account again.
    -   In the "Select app" dropdown, choose **Mail**.
    -   In the "Select device" dropdown, choose **Other (Custom name)** and enter a name like "Imanografias App".
    -   Click **Generate**.
    -   A 16-character password will appear in a yellow bar on your device's screen. **This is your App password.** Copy this password.

3.  **Use the App Password**:
    -   Paste this 16-character password into your `.env.local` file as the value for `GMAIL_APP_PASSWORD`.

    **Important**: This App password is shown only once. If you lose it, you'll need to generate a new one.

### Running the Development Server

\`\`\`bash
npm run dev
# or
yarn dev
\`\`\`

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

## Deployment

This project can be easily deployed to Vercel. Ensure your environment variables are configured in your Vercel project settings.

## Project Structure

-   `app/page.tsx`: The main application logic, including the order form, image upload, cropping, and order processing.
-   `app/lib/pdf-generator.ts`: Contains the logic for generating high-quality image files from the cropped images.
-   `app/api/uploadthing/core.ts`: UploadThing configuration for handling image uploads.
-   `app/api/uploadthing/route.ts`: API route for UploadThing.
-   `lib/uploadthing.ts`: Client-side utilities for UploadThing.
-   `app/api/send-email/route.ts`: API route for sending email notifications using Nodemailer and Gmail.
-   `components/ui/*`: Shadcn/ui components used throughout the application.
-   `public/`: Static assets like the logo and placeholder images.

## Customization

-   **Image Dimensions**: The `ImageCropper` component currently generates 1200x1200 pixel images (equivalent to 5x5 cm at 300 DPI). You can adjust the `size` variable in `ImageCropper`'s `cropImage` function for different output dimensions.
-   **Email Content**: Modify the `emailContent` HTML string in `app/api/send-email/route.ts` to customize the email's appearance and information.
-   **Styling**: Adjust Tailwind CSS classes in the components or `app/globals.css` for visual changes.

## Contributing

Feel free to fork the repository and contribute.

## License

[MIT License](LICENSE) (You might want to create a LICENSE file in your repo)
